syntax = "proto3";

package faas.functions.v1;

option go_package = "github.com/10Narratives/faas/pkg/faas/functions/v1;functionspb";

import "google/api/resource.proto";
import "google/protobuf/timestamp.proto";
import "google/api/field_behavior.proto";

import "validate/validate.proto";

// A serverless function resource.
message Function {
  option (google.api.resource) = {
    type: "faas.functions.v1/Function"
    pattern: "functions/{function}"
    singular: "function"
    plural: "functions"
  };

  // The resource name of the function.
  // Format: `functions/{function_id}`
  string name = 1 [(google.api.field_behavior) = IDENTIFIER];

  string parameters_schema = 2 [
    (google.api.field_behavior) = REQUIRED,
    (validate.rules).string = {min_len: 1}
  ];

  // The entry point file for the function.
  string entrypoint = 3 [
    (google.api.field_behavior) = REQUIRED,
    (validate.rules).string = {min_len: 1}
  ];

  // The path to the source code in the storage system.
  string source_path = 4 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (validate.rules).string = {min_len: 1}
  ];
}